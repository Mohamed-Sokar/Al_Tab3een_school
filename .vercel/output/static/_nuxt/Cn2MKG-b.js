import{_ as M}from"./DJc-qFf6.js";import{_ as T}from"./BxXEQc89.js";import{k as $,v as c,g as h,c as k,o as _,a as n,i as x,b as l,j as o,a0 as d,w as v,t as w,Y as z,X as N,_ as R}from"./Bdt3oPQx.js";import{_ as E}from"./5e5F26OJ.js";import{m as f}from"./CehikpY4.js";import{u as F}from"./rVIyH-S1.js";import{u as I}from"./YhHHmAl6.js";import"./By-TetZO.js";import"./vVQ4po60.js";import"./CHIgUVhi.js";import"./Dlsi226R.js";import"./Bp9vj24c.js";import"./BNDzZfAd.js";import"./CwNombFT.js";import"./1rqy2HNY.js";import"./CnqViFtj.js";import"./CdmufGkO.js";const j={class:"w-full grid md:grid-cols-6 gap-3 mt-5"},C={class:"flex items-center justify-end gap-2 mt-8 mb-2"},O=$({__name:"absence",setup(D){const r=F(),{getArabicDayName:m}=I(),s=c(""),b=c(Math.random()),V=new Date().getMonth(),i=c(f[V]),u=c(new Date().toISOString().split("T")[0]),S=[{accessorKey:"rowNumber",header:"الرقم"},{accessorKey:"teacher_name",header:"اسم المعلم"},{accessorKey:"date",header:"اليوم",cell:({row:t})=>m(String(t.original.date))},{accessorKey:"date",header:"التاريخ"},{accessorKey:"excuse_status",header:"حالة العذر"},{accessorKey:"reason",header:"السبب"},{id:"action"}];function U(t){return[[{label:"Edit",icon:"i-lucide-edit",onSelect:()=>{N(`/teachers/${t.id}/edit_absence_report`)}},{label:"Delete",icon:"i-lucide-trash",color:"error",onSelect:()=>{r.deleteTeacherAbsenceReport(typeof t.id=="number"?t.id:0)}}]]}const A=h(()=>(b.value=Math.random(),r.sortedAbsenceReports.filter(t=>new Date(t.date||new Date).getMonth()===f.indexOf(i.value)))),p=h(()=>A.value.map((t,e)=>({...t,rowNumber:e+1})));return(t,e)=>{const g=M,K=T,y=z,B=E;return _(),k("div",null,[n("div",j,[l(g,{icon:"i-lucide-search",size:"lg",color:"secondary",variant:"outline",modelValue:o(s),"onUpdate:modelValue":e[0]||(e[0]=a=>d(s)?s.value=a:null),placeholder:"البحث عن معلم...",class:"w-full md:col-span-4"},null,8,["modelValue"]),l(g,{modelValue:o(u),"onUpdate:modelValue":e[1]||(e[1]=a=>d(u)?u.value=a:null),type:"date",size:"lg",color:"secondary",class:"w-full"},null,8,["modelValue"]),l(K,{modelValue:o(i),"onUpdate:modelValue":e[2]||(e[2]=a=>d(i)?i.value=a:null),items:o(f),size:"lg",color:"secondary",class:"w-full"},null,8,["modelValue","items"])]),n("div",C,[l(y,{icon:"heroicons-document-chart-bar-solid",variant:"outline",color:"secondary",size:"sm",class:"p-2 font-bold text-blue-700"},{default:v(()=>[e[4]||(e[4]=n("span",null,"تصدير",-1)),n("span",null,"("+w(o(p).length)+")",1),e[5]||(e[5]=n("span",null," PDF ",-1))]),_:1,__:[4,5]}),l(y,{icon:"heroicons-document-chart-bar-solid",variant:"outline",color:"primary",size:"sm",class:"p-2 font-bold text-green-700"},{default:v(()=>[e[6]||(e[6]=n("span",null,"تصدير",-1)),n("span",null,"("+w(o(p).length)+")",1),e[7]||(e[7]=n("span",null," Excel ",-1))]),_:1,__:[6,7]})]),(_(),x(B,{loading:o(r).loading,key:o(b),"global-filter":o(s),"onUpdate:globalFilter":e[3]||(e[3]=a=>d(s)?s.value=a:null),data:o(p),columns:S,"get-dropdown-actions":U},null,8,["loading","global-filter","data"]))])}}}),P={};function X(D,r){const m=O;return _(),x(m)}const ie=R(P,[["render",X]]);export{ie as default};
