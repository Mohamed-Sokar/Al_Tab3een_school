import{k as N,v as f,y as C,g,c as B,o as v,a,i as E,b as s,j as t,a0 as y,Y as U,w as i,t as b,n as F,d as V,a1 as T,X as j,_ as A}from"./Bdt3oPQx.js";import{_ as z}from"./Bn0lJZWP.js";import{_ as I}from"./HuR9QTfO.js";import{_ as H}from"./DJc-qFf6.js";import{_ as O}from"./BxXEQc89.js";import{_ as R}from"./5e5F26OJ.js";import{m as x}from"./CehikpY4.js";import{u as X}from"./CClkhEiv.js";import{u as Y}from"./YhHHmAl6.js";import"./By-TetZO.js";import"./vVQ4po60.js";import"./CHIgUVhi.js";import"./Dlsi226R.js";import"./Bp9vj24c.js";import"./BNDzZfAd.js";import"./CwNombFT.js";import"./1rqy2HNY.js";import"./CnqViFtj.js";import"./CdmufGkO.js";const q={class:"w-full grid md:grid-cols-6 gap-3 mt-5"},G={class:"flex items-center justify-end gap-2 mt-8 mb-2"},J={class:"flex items-center gap-4 mb-5"},L=N({__name:"main",setup($){const l=X(),{getArabicDayName:u}=Y(),m=z,r=f(""),p=new Date().getMonth(),c=f(x[p]),h=f(Math.random());C(c,()=>h.value=Math.random());const k=[{accessorKey:"rowNumber",header:"الرقم"},{accessorKey:"type",header:"نوع الدفعة",cell:({row:o})=>{const e=o.original.type??"وارد",_={وارد:"success",صادر:"error"}[e];return T(m,{class:"capitalize",variant:"subtle",color:_},()=>e)}},{accessorKey:"date",header:"اليوم",cell:({row:o})=>u(String(o.original.date))},{accessorKey:"date",header:"تاريخ الدفعة"},{accessorKey:"description",header:"وصف الدفعة"},{accessorKey:"amount",header:"القيمة"},{id:"action"}];function K(o){return[{label:"Edit",icon:"i-lucide-edit",onSelect:()=>{j(`/payments/${o.id}/edit_payment`)}},{label:"Delete",icon:"i-lucide-trash",color:"error",onSelect:()=>{l.deletePayment(o.id??0)}}]}const M=g(()=>l.sortedPayment.filter(o=>new Date(o.date??new Date).getMonth()===x.indexOf(c.value))),w=g(()=>M.value.map((o,e)=>({...o,rowNumber:e+1}))),d=g(()=>w.value.reduce((o,e)=>e.type==="وارد"?o+=e.amount:o-=e.amount??0,0));return(o,e)=>{const _=H,P=O,D=U,S=R;return v(),B("div",null,[a("div",q,[s(_,{icon:"i-lucide-search",size:"lg",color:"secondary",variant:"outline",modelValue:t(r),"onUpdate:modelValue":e[0]||(e[0]=n=>y(r)?r.value=n:null),placeholder:"البحث عن دفعة...",class:"w-full md:col-span-4"},null,8,["modelValue"]),s(P,{modelValue:t(c),"onUpdate:modelValue":e[1]||(e[1]=n=>y(c)?c.value=n:null),items:t(x),size:"lg",color:"secondary",class:"w-full"},null,8,["modelValue","items"])]),a("div",G,[s(D,{icon:"heroicons-document-chart-bar-solid",variant:"outline",color:"secondary",size:"sm",class:"p-2 font-bold text-blue-700"},{default:i(()=>{var n;return[e[3]||(e[3]=a("span",null,"تصدير",-1)),a("span",null,"("+b((n=t(l).paymentsData)==null?void 0:n.length)+")",1),e[4]||(e[4]=a("span",null," PDF ",-1))]}),_:1,__:[3,4]}),s(D,{icon:"heroicons-document-chart-bar-solid",variant:"outline",color:"primary",size:"sm",class:"p-2 font-bold text-green-700"},{default:i(()=>{var n;return[e[5]||(e[5]=a("span",null,"تصدير",-1)),a("span",null,"("+b((n=t(l).paymentsData)==null?void 0:n.length)+")",1),e[6]||(e[6]=a("span",null," Excel ",-1))]}),_:1,__:[5,6]})]),a("div",J,[e[7]||(e[7]=a("div",null,"مجموع الصادر والوارد:",-1)),a("div",{class:F(["font-bold text-2xl",{"text-black dark:text-white font-normal":t(d)===0,"text-success":t(d)>0,"text-error":t(d)<0}])},[s(t(m),{color:t(d)>=0?"success":"error",size:"xl",class:"font-bold"},{default:i(()=>[V(b(t(d)),1)]),_:1},8,["color"])],2)]),(v(),E(S,{loading:t(l).loading,key:t(h),"global-filter":t(r),"onUpdate:globalFilter":e[2]||(e[2]=n=>y(r)?r.value=n:null),data:t(w),columns:k,"get-dropdown-actions":K},null,8,["loading","global-filter","data"]))])}}}),Q={};function W($,l){const u=U,m=z,r=I,p=L;return v(),B("div",null,[s(r,{title:"المصروفات",description:"إدارة المصروفات الشهرية للطلاب"},{actions:i(()=>[s(u,{icon:"heroicons-plus-circle-20-solid",size:"lg",color:"secondary",class:"bg-blue-600 px-3 py-2 font-bold",variant:"solid",to:"/payments/add"},{default:i(()=>l[0]||(l[0]=[V("إضافة دفعة جديدة")])),_:1,__:[0]})]),default:i(()=>[s(m,{color:"neutral"})]),_:1}),s(p)])}const be=A(Q,[["render",W]]);export{be as default};
