import{_ as R}from"./Bn0lJZWP.js";import{k as X,v as b,g as Y,c as a,o as t,b as v,a as s,i as N,w as U,K as q,j as n,G as j,H as D,t as r,a0 as w,Y as J,a1 as _,X as k,_ as O}from"./Bdt3oPQx.js";import{_ as Q}from"./Dlsi226R.js";import{_ as W}from"./ByrGOqPk.js";import{_ as Z}from"./DJc-qFf6.js";import{_ as ee}from"./5e5F26OJ.js";import{u as se}from"./rVIyH-S1.js";import{u as oe}from"./YhHHmAl6.js";import"./By-TetZO.js";import"./Bp9vj24c.js";import"./CHIgUVhi.js";import"./vVQ4po60.js";import"./BNDzZfAd.js";import"./CwNombFT.js";import"./1rqy2HNY.js";import"./CnqViFtj.js";import"./CdmufGkO.js";const ne={key:0},te={key:0},ae={class:"pt-3"},re={class:"font-bold"},le={key:1},ie={key:1},ce={key:0},de={class:"pt-3"},ue={class:"font-bold"},pe={key:1},be={key:2},ge={key:0},_e={class:"pt-3"},he={class:"font-bold"},me={key:1},fe={class:"w-full grid md:grid-cols-6 gap-3 mt-5"},ye={class:"flex items-center justify-end gap-2 mt-8 mb-2"},ve=X({__name:"main",setup(V){const m=se(),{getArabicDayName:h}=oe(),g=b(""),$=b([{id:"id",desc:!1}]),A=b(Math.random()),S=R,f=J,F=Q,i=b(),u=b(),y=b(!1),I=b();function x(o,e){u.value=e,i.value=o,y.value=!0}const E=[{accessorKey:"rowNumber",header:"الرقم"},{accessorKey:"identity_number",header:"الهوية"},{accessorKey:"full_name",header:({column:o})=>{const e=o.getIsSorted();return _(f,{color:"neutral",variant:"ghost",label:"الاسم رباعي",icon:e?e==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5 ",onClick:()=>o.toggleSorting(o.getIsSorted()==="asc")})}},{accessorKey:"phone_number",header:"رقم الجوال"},{accessorKey:"birth_date",header:({column:o})=>H(o,"تاريخ الميلاد"),cell:({row:o})=>o.original.birth_date},{accessorKey:"subject",header:"المادة"},{accessorKey:"teachers_behavioral_issues",header:"المخالفات الإدارية",cell:({row:o})=>{const e=o.original.teachers_behavioral_issues||[];return _(S,{class:`capitalize hover:cursor-pointer hover:outline ${e.length>0?"font-bold":"font-normal"}`,variant:`${e.length>0?"subtle":"soft"}`,color:`${e.length>0?"error":"success"}`,onClick:()=>x(o.original,"behavioral_issues")},()=>`${e.length} مخالفة`)}},{accessorKey:"teachers_loans",header:"السلف المستحقة",cell:({row:o})=>{const e=o.original.teachers_loans||[];return _(S,{class:`capitalize hover:cursor-pointer hover:outline ${e.length>0?"font-bold":"font-normal"}`,variant:`${e.length?"subtle":"soft"}`,color:`${e.length?"error":"success"}`,onClick:()=>x(o.original,"loans")},()=>`${e.length} سلفة`)}},{accessorKey:"teachers_absence",header:"أيام الغياب",cell:({row:o})=>{const e=o.original.teachers_absence||[];return _(S,{class:`capitalize hover:cursor-pointer hover:outline ${e.length>0?"font-bold":"font-normal"}`,variant:`${e.length?"subtle":"soft"}`,color:`${e.length?"error":"success"}`,onClick:()=>x(o.original,"absence")},()=>`${e.length} يوم`)}},{id:"action"}];function H(o,e){const d=o.getIsSorted();return _(F,{content:{align:"start"},"aria-label":"Actions dropdown",items:[{label:"Asc",type:"checkbox",icon:"i-lucide-arrow-up-narrow-wide",checked:d==="asc",onSelect:()=>{d==="asc"?o.clearSorting():o.toggleSorting(!1)}},{label:"Desc",icon:"i-lucide-arrow-down-wide-narrow",type:"checkbox",checked:d==="desc",onSelect:()=>{d==="desc"?o.clearSorting():o.toggleSorting(!0)}}]},()=>_(f,{color:"neutral",variant:"ghost",label:e,icon:d?d==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5 data-[state=open]:bg-elevated","aria-label":`Sort by ${d==="asc"?"descending":"ascending"}`}))}function G(o){return[[{label:"إضافة تقرير غياب",color:"error",icon:"i-heroicons-user-minus",onSelect:()=>{k(`/teachers/${o.id}/add_absence_report`)}},{label:"إضافة مخالفة إدارية",color:"warning",icon:"i-heroicons-exclamation-triangle",onSelect:()=>{k(`/teachers/${o.id}/add_behavioral_issue`)}},{label:"إضافة سلفة",color:"info",icon:"i-heroicons-banknotes",onSelect:()=>{k(`/teachers/${o.id}/add_loan`)}}],[{label:"Edit",icon:"i-lucide-edit",onSelect:()=>{k(`/teachers/${o.id}/edit_teacher`)}},{label:"Delete",icon:"i-lucide-trash",color:"error",onSelect:()=>{m.deleteTeacher(o.id||"")}}]]}const K=Y(()=>m.sortedTeachers.map((o,e)=>({...o,rowNumber:e+1})));return(o,e)=>{const d=W,L=Z,P=ee;return t(),a("div",null,[v(d,{open:n(y),"onUpdate:open":e[0]||(e[0]=c=>w(y)?y.value=c:null),title:n(u)==="behavioral_issues"?"تفاصيل المخالفات":n(u)==="loans"?"تفاصيل السلف":n(u)==="absence"?"تفاصيل أيام الغياب":""},{body:U(()=>{var c,T,B,C,z,M;return[n(u)==="behavioral_issues"?(t(),a("div",ne,[(T=(c=n(i))==null?void 0:c.teachers_behavioral_issues)!=null&&T.length?(t(),a("div",te,[s("ul",null,[e[4]||(e[4]=s("li",{class:"grid grid-cols-3 justify-between items-center gap-2 border-b py-2"},[s("span",{class:"font-bold"},"اليوم"),s("span",{class:"font-bold"},"التاريخ"),s("span",{class:"font-bold"},"المخالفة")],-1)),(t(!0),a(j,null,D(n(i).teachers_behavioral_issues,(l,p)=>(t(),a("li",{key:p,class:"grid grid-cols-3 justify-between items-center gap-2 border-b border-dashed border-gray-200 py-2 mb-2"},[s("span",null,r(n(h)(l.date+"")),1),s("span",null,r(l.date),1),s("span",null,r(l.description),1)]))),128))]),s("div",ae,[e[5]||(e[5]=s("span",null," المجموع: ",-1)),s("span",re,r(n(i).teachers_behavioral_issues.length),1)])])):(t(),a("p",le,"لا توجد مخالفات."))])):n(u)==="loans"?(t(),a("div",ie,[(C=(B=n(i))==null?void 0:B.teachers_loans)!=null&&C.length?(t(),a("div",ce,[s("ul",null,[e[6]||(e[6]=s("li",{class:"grid grid-cols-3 justify-between items-center gap-2 border-b py-2"},[s("span",{class:"font-bold"},"اليوم"),s("span",{class:"font-bold"},"التاريخ"),s("span",{class:"font-bold"},"القيمة")],-1)),(t(!0),a(j,null,D(n(i).teachers_loans,(l,p)=>(t(),a("li",{key:p,class:"grid grid-cols-3 justify-between items-center gap-2 border-b border-dashed border-gray-200 py-2 mb-2"},[s("span",null,r(n(h)(l.date+"")),1),s("span",null,r(l.date),1),s("span",null,r(l.amount)+" ₪ ",1)]))),128))]),s("div",de,[e[7]||(e[7]=s("span",null," المجموع: ",-1)),s("span",ue,r(n(i).teachers_loans.reduce((l,p)=>l+(p.amount||0),0))+" ₪ ",1)])])):(t(),a("p",pe,"لا توجد سلف مستحقة."))])):n(u)==="absence"?(t(),a("div",be,[(M=(z=n(i))==null?void 0:z.teachers_absence)!=null&&M.length?(t(),a("div",ge,[s("ul",null,[e[8]||(e[8]=s("li",{class:"grid grid-cols-4 justify-between items-center gap-2 border-b py-1"},[s("span",{class:"font-bold"},"اليوم"),s("span",{class:"font-bold"},"التاريخ"),s("span",{class:"font-bold"},"حالة العذر"),s("span",{class:"font-bold"},"سبب الغياب")],-1)),(t(!0),a(j,null,D(n(i).teachers_absence,(l,p)=>(t(),a("li",{key:p,class:"grid grid-cols-4 justify-center items-center gap-2 border-b border-dashed border-gray-200 py-2 mb-2"},[s("span",null,r(n(h)(l.date+"")),1),s("span",null,r(l.date),1),s("span",null,r(l.excuse_status),1),s("span",null,r(l.reason),1)]))),128))]),s("div",_e,[e[9]||(e[9]=s("span",null," المجموع: ",-1)),s("span",he,r(n(i).teachers_absence.length),1)])])):(t(),a("p",me,"لا يوجد أيام غياب."))])):q("",!0)]}),_:1},8,["open","title"]),s("div",fe,[v(L,{icon:"i-lucide-search",size:"lg",color:"secondary",variant:"outline",modelValue:n(g),"onUpdate:modelValue":e[1]||(e[1]=c=>w(g)?g.value=c:null),placeholder:"البحث عن معلم...",class:"w-full md:col-span-4"},null,8,["modelValue"])]),s("div",ye,[v(n(f),{icon:"heroicons-document-chart-bar-solid",variant:"outline",color:"secondary",size:"sm",class:"p-2 font-bold text-blue-700"},{default:U(()=>[e[10]||(e[10]=s("span",null,"تصدير",-1)),s("span",null,"("+r(n(K).length)+")",1),e[11]||(e[11]=s("span",null," PDF ",-1))]),_:1,__:[10,11]}),v(n(f),{icon:"heroicons-document-chart-bar-solid",variant:"outline",color:"primary",size:"sm",class:"p-2 font-bold text-green-700"},{default:U(()=>[e[12]||(e[12]=s("span",null,"تصدير",-1)),s("span",null,"("+r(n(K).length)+")",1),e[13]||(e[13]=s("span",null," Excel ",-1))]),_:1,__:[12,13]})]),(t(),N(P,{loading:n(m).loading,key:n(A),"global-filter":n(g),"onUpdate:globalFilter":e[2]||(e[2]=c=>w(g)?g.value=c:null),ref:n(I),data:n(K),columns:E,sorting:n($),"onUpdate:sorting":e[3]||(e[3]=c=>w($)?$.value=c:null),"get-dropdown-actions":G},null,8,["loading","global-filter","data","sorting"]))])}}}),we={};function ke(V,m){const h=ve;return t(),N(h)}const Ee=O(we,[["render",ke]]);export{Ee as default};
