import{k as $,$ as D,v as w,a3 as M,B as z,y as O,c as u,o as i,a as t,b as o,l as U,ad as S,w as n,K as x,i as j,j as g,a4 as I,t as k,G as V,H,e as P,n as R,X as C,u as q,r as F}from"./Bdt3oPQx.js";import{_ as G}from"./Dlsi226R.js";import{u as J}from"./CnqViFtj.js";import{u as T}from"./E7VpxlTN.js";import{a as K}from"./CdmufGkO.js";import{u as Q}from"./CZWSmh2a.js";import{u as W}from"./BV0LrqSL.js";import{u as X}from"./CClkhEiv.js";import{u as Y}from"./rVIyH-S1.js";import{u as Z}from"./D8k5ZMmC.js";import{u as ee}from"./BXPk3F4g.js";import{u as te}from"./Cjavoy-t.js";import{u as se}from"./qE0mH2sV.js";import"./By-TetZO.js";import"./Bp9vj24c.js";import"./CehikpY4.js";const ae={key:0,class:"fixed lg:sticky top-0 right-0 flex flex-col justify-between w-64 h-screen z-1000 bg-gradient-to-b from-blue-800 to-purple-700 dark:from-gray-900 dark:to-gray-800 text-white transition-all duration-300 ease-in-out"},oe={class:"flex items-center gap-4 p-4 border-b border-blue-300 dark:border-gray-700"},re={class:"text-left w-full"},ne={class:"flex justify-between w-full"},ie={class:"font-medium text-gray-900 dark:text-white"},le={class:"mt-6 px-2 flex-1 space-y-2 text-right overflow-y-auto"},ce={class:"text-base text-white dark:text-gray-200"},ue=$({__name:"sidebar",setup(A){const l=D(),{toastError:d,toastSuccess:b}=J(),s=w(!1),r=w(!1),m=w(!1),v=T(),c=M();function f(){r.value=window.innerWidth>=1024}z(()=>{f(),window.addEventListener("resize",f)}),O(()=>l.path,()=>{r.value||(s.value=!1)});const y=async()=>{var p;try{m.value=!0,await K.post("/notifications/send-telegram",{message:`🔔 تم تسجيل الخروج من حساب ${(p=c.value)==null?void 0:p.email}`});const{error:e}=await v.auth.signOut();if(C("/login"),e)throw new Error(e.message);b({title:"تم تسجيل الخروج بنجاح"})}catch(e){d({title:"حدث مشكلة في تسجيل الخروج",description:e instanceof Error?e.message:typeof e=="string"?e:JSON.stringify(e)})}finally{m.value=!1}},_=[{label:"الرئيسية",icon:"i-lucide-home",to:"/"},{label:"الطلاب",icon:"i-lucide-users",to:"/students/view/students_table"},{label:"المعلمون",icon:"i-lucide-users",to:"/teachers/view"},{label:"المصروفات",icon:"i-lucide-credit-card",to:"/payments"},{label:"الصفوف",icon:"i-heroicons-presentation-chart-bar",to:"/classes/view/academic_classes",star:!0},{label:"السائقين",icon:"i-lucide-car-taxi-front",to:"/drivers",star:!0},{label:"المستويات",icon:"i-lucide-book-open",to:"/levels"},{label:"خطط الطلاب",icon:"i-heroicons-calendar-days",to:"/plans"},{label:"الإعدادات",icon:"i-lucide-settings",to:"/settings/general"}],B=[[{slot:"account",icon:"i-lucide-user",disabled:!0}],[{label:"تغيير الصورة الشخصية",icon:"i-heroicons-camera",onSelect:()=>{C("/settings/avatar")}}],[{label:"تسجيل خروج",color:"error",icon:"heroicons-arrow-right-end-on-rectangle-20-solid",class:"text-red-500  hover:cursor-pointer",onSelect:()=>{y()}}]];return(p,e)=>{const h=U,L=I,E=G,N=P;return i(),u("div",null,[t("button",{class:"fixed top-4 right-4 z-50 bg-blue-700 dark:bg-blue-600 text-white p-2 rounded-lg shadow-lg lg:hidden",onClick:e[0]||(e[0]=a=>s.value=!s.value)},[o(h,{name:s.value?"i-lucide-x":"lucide-align-right",class:"size-6"},null,8,["name"])]),o(S,{name:"fade"},{default:n(()=>[s.value&&!r.value?(i(),u("div",{key:0,class:"fixed inset-0 bg-black/50 z-40",onClick:e[1]||(e[1]=a=>s.value=!1)})):x("",!0)]),_:1}),o(S,{name:"slide"},{default:n(()=>[s.value||r.value?(i(),u("aside",ae,[t("div",oe,[t("div",null,[g(c)?(i(),j(E,{key:0,class:"hover:cursor-pointer",arrow:"",items:B,ui:{content:"w-60"}},{account:n(({item:a})=>[t("div",re,[e[2]||(e[2]=t("p",{class:"text-muted"},"تم تسجيل الدخول بحساب",-1)),t("div",ne,[t("p",ie,k(g(c).email),1),o(h,{name:a.icon,class:"flex-shrink-0 h-4 w-4 text-gray-400 dark:text-gray-500 ms-auto"},null,8,["name"])])])]),"item-leading":n(()=>e[3]||(e[3]=[])),default:n(()=>[o(L,{src:p.url??"/images/avatar.avif",size:"xl",class:"border"},null,8,["src"])]),_:1})):x("",!0)]),e[4]||(e[4]=t("div",null,[t("h2",{class:"text-xl font-bold text-white"},"جلال أبو صايمة"),t("p",{class:"text-sm text-blue-200 dark:text-gray-400"}," مدير مدرسة التابعين ")],-1))]),t("nav",le,[(i(),u(V,null,H(_,a=>t("div",{key:a.to},[o(N,{to:a.to,class:R(["flex items-center font-semibold gap-3 px-4 py-2 rounded-lg transition hover:bg-blue-600",{"bg-blue-600":a.to==="/"?g(l).path===a.to:g(l).path.includes(a.to)}])},{default:n(()=>[o(h,{name:a.icon,class:"size-5"},null,8,["name"]),t("span",ce,k(a.label),1),o(h,{name:a.star?"i-heroicons-sparkles-solid":"",class:"size-5 text-warning-300"},null,8,["name"])]),_:2},1032,["to","class"])])),64))])])):x("",!0)]),_:1})])}}}),de={class:"flex"},me={class:"lg:w-[calc(100%-190px)] min-h-screen w-full dark:bg-gray-950"},fe={class:"w-full min-h-screen px-4 pt-4 pb-10 dark:from-gray-900 dark:to-gray-800"},Be=$({__name:"default",setup(A){T(),q({title:"Al Tabeen School",htmlAttrs:{dir:"rtl",lang:"ar"}});const l=Q();l.preference="system";const d=W(),b=X(),s=Y(),r=Z(),m=ee(),v=te(),c=se();return z(async()=>{await d.fetchStudents(),await m.fetchClasses(),await v.fetchClasses(),await c.fetchDrivers(),await r.fetchLevels(),await s.fetchTeachers(),await s.fetchAbsenceReports(),await s.fetchTeachersLoans(),await s.fetchTeachersBehavioralIssues(),await d.fetchBehavioralIssues(),await b.fetchPayments()}),(f,y)=>{const _=ue;return i(),u("div",de,[o(_),t("div",me,[t("div",fe,[t("main",null,[F(f.$slots,"default")])])])])}}});export{Be as default};
