import{_ as se}from"./DJc-qFf6.js";import{_ as re}from"./TqmmhZlW.js";import{k as I,O as Q,Q as X,y as H,g as m,R as ie,i as M,o as v,w as f,r as F,j as t,P as L,F as ne,S as J,T as oe,U as le,f as ue,V as ce,W as de,h as O,c as z,K as W,b as p,I as Y,n as V,d as U,t as P,G as ee,H as te,v as Z,x as me,B as pe,X as G,a as N,Y as fe,l as ve}from"./Bdt3oPQx.js";import{i as ae}from"./CHIgUVhi.js";import{c as xe,a as K,_ as _e}from"./DNUGNUt7.js";import{_ as ge}from"./D9_M2GaU.js";import{u as he}from"./E7VpxlTN.js";import{u as ye}from"./CnqViFtj.js";import{a as we}from"./CdmufGkO.js";import"./CwNombFT.js";import"./Bp9vj24c.js";const S=100,[be,Ve]=ie("ProgressRoot"),B=a=>typeof a=="number";function ze(a,u){return ae(a)||B(a)&&!Number.isNaN(a)&&a<=u&&a>=0?a:(console.error(`Invalid prop \`value\` of value \`${a}\` supplied to \`ProgressRoot\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${S} if no \`max\` prop is set)
  - \`null\`  or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`),null)}function $e(a){return B(a)&&!Number.isNaN(a)&&a>0?a:(console.error(`Invalid prop \`max\` of value \`${a}\` supplied to \`ProgressRoot\`. Only numbers greater than 0 are valid max values. Defaulting to \`${S}\`.`),S)}const qe=I({__name:"ProgressRoot",props:{modelValue:{},max:{default:S},getValueLabel:{type:Function,default:(a,u)=>B(a)?`${Math.round(a/u*S)}%`:void 0},getValueText:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue","update:max"],setup(a,{emit:u}){const e=a,g=u;Q();const i=X(e,"modelValue",g,{passive:e.modelValue===void 0}),l=X(e,"max",g,{passive:e.max===void 0});H(()=>i.value,async s=>{const c=ze(s,e.max);c!==s&&(await ne(),i.value=c)},{immediate:!0}),H(()=>e.max,s=>{const c=$e(e.max);c!==s&&(l.value=c)},{immediate:!0});const h=m(()=>ae(i.value)?"indeterminate":i.value===l.value?"complete":"loading");return Ve({modelValue:i,max:l,progressState:h}),(s,c)=>{var y;return v(),M(t(L),{"as-child":s.asChild,as:s.as,"aria-valuemax":t(l),"aria-valuemin":0,"aria-valuenow":B(t(i))?t(i):void 0,"aria-valuetext":(y=s.getValueText)==null?void 0:y.call(s,t(i),t(l)),"aria-label":s.getValueLabel(t(i),t(l)),role:"progressbar","data-state":h.value,"data-value":t(i)??void 0,"data-max":t(l)},{default:f(()=>[F(s.$slots,"default",{modelValue:t(i)})]),_:3},8,["as-child","as","aria-valuemax","aria-valuenow","aria-valuetext","aria-label","data-state","data-value","data-max"])}}}),Ne=I({__name:"ProgressIndicator",props:{asChild:{type:Boolean},as:{}},setup(a){const u=a,e=be();return Q(),(g,i)=>{var l;return v(),M(t(L),J(u,{"data-state":t(e).progressState.value,"data-value":((l=t(e).modelValue)==null?void 0:l.value)??void 0,"data-max":t(e).max.value}),{default:f(()=>[F(g.$slots,"default")]),_:3},16,["data-state","data-value","data-max"])}}}),Pe={slots:{root:"gap-2",base:"relative overflow-hidden rounded-full bg-accented",indicator:"rounded-full size-full transition-transform duration-200 ease-out",status:"flex justify-end text-dimmed transition-[width] duration-200",steps:"grid items-end",step:"truncate text-end row-start-1 col-start-1 transition-opacity"},variants:{animation:{carousel:"","carousel-inverse":"",swing:"",elastic:""},color:{primary:{indicator:"bg-primary",steps:"text-primary"},secondary:{indicator:"bg-secondary",steps:"text-secondary"},success:{indicator:"bg-success",steps:"text-success"},info:{indicator:"bg-info",steps:"text-info"},warning:{indicator:"bg-warning",steps:"text-warning"},error:{indicator:"bg-error",steps:"text-error"},neutral:{indicator:"bg-inverted",steps:"text-inverted"}},size:{"2xs":{status:"text-xs",steps:"text-xs"},xs:{status:"text-xs",steps:"text-xs"},sm:{status:"text-sm",steps:"text-sm"},md:{status:"text-sm",steps:"text-sm"},lg:{status:"text-sm",steps:"text-sm"},xl:{status:"text-base",steps:"text-base"},"2xl":{status:"text-base",steps:"text-base"}},step:{active:{step:"opacity-100"},first:{step:"opacity-100 text-muted"},other:{step:"opacity-0"},last:{step:""}},orientation:{horizontal:{root:"w-full flex flex-col",base:"w-full",status:"flex-row"},vertical:{root:"h-full flex flex-row-reverse",base:"h-full",status:"flex-col"}},inverted:{true:{status:"self-end"}}},compoundVariants:[{inverted:!0,orientation:"horizontal",class:{step:"text-start",status:"flex-row-reverse"}},{inverted:!0,orientation:"vertical",class:{steps:"items-start",status:"flex-col-reverse"}},{orientation:"horizontal",size:"2xs",class:"h-px"},{orientation:"horizontal",size:"xs",class:"h-0.5"},{orientation:"horizontal",size:"sm",class:"h-1"},{orientation:"horizontal",size:"md",class:"h-2"},{orientation:"horizontal",size:"lg",class:"h-3"},{orientation:"horizontal",size:"xl",class:"h-4"},{orientation:"horizontal",size:"2xl",class:"h-5"},{orientation:"vertical",size:"2xs",class:"w-px"},{orientation:"vertical",size:"xs",class:"w-0.5"},{orientation:"vertical",size:"sm",class:"w-1"},{orientation:"vertical",size:"md",class:"w-2"},{orientation:"vertical",size:"lg",class:"w-3"},{orientation:"vertical",size:"xl",class:"w-4"},{orientation:"vertical",size:"2xl",class:"w-5"},{orientation:"horizontal",animation:"carousel",class:{indicator:"data-[state=indeterminate]:animate-[carousel_2s_ease-in-out_infinite] data-[state=indeterminate]:rtl:animate-[carousel-rtl_2s_ease-in-out_infinite]"}},{orientation:"vertical",animation:"carousel",class:{indicator:"data-[state=indeterminate]:animate-[carousel-vertical_2s_ease-in-out_infinite]"}},{orientation:"horizontal",animation:"carousel-inverse",class:{indicator:"data-[state=indeterminate]:animate-[carousel-inverse_2s_ease-in-out_infinite] data-[state=indeterminate]:rtl:animate-[carousel-inverse-rtl_2s_ease-in-out_infinite]"}},{orientation:"vertical",animation:"carousel-inverse",class:{indicator:"data-[state=indeterminate]:animate-[carousel-inverse-vertical_2s_ease-in-out_infinite]"}},{orientation:"horizontal",animation:"swing",class:{indicator:"data-[state=indeterminate]:animate-[swing_2s_ease-in-out_infinite]"}},{orientation:"vertical",animation:"swing",class:{indicator:"data-[state=indeterminate]:animate-[swing-vertical_2s_ease-in-out_infinite]"}},{orientation:"horizontal",animation:"elastic",class:{indicator:"data-[state=indeterminate]:animate-[elastic_2s_ease-in-out_infinite]"}},{orientation:"vertical",animation:"elastic",class:{indicator:"data-[state=indeterminate]:animate-[elastic-vertical_2s_ease-in-out_infinite]"}}],defaultVariants:{animation:"carousel",color:"primary",size:"md"}},Se={__name:"Progress",props:{as:{type:null,required:!1},max:{type:[Number,Array],required:!1},status:{type:Boolean,required:!1},inverted:{type:Boolean,required:!1,default:!1},size:{type:null,required:!1},color:{type:null,required:!1},orientation:{type:null,required:!1,default:"horizontal"},animation:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},getValueLabel:{type:Function,required:!1},modelValue:{type:[Number,null],required:!1,default:null}},emits:["update:modelValue","update:max"],setup(a,{emit:u}){const e=a,g=u,i=oe(),{dir:l}=le(),h=ue(),s=ce(de(e,"getValueLabel","modelValue"),g),c=m(()=>s.value.modelValue===null),y=m(()=>Array.isArray(e.max)),b=m(()=>{if(!(c.value||!e.max))return Array.isArray(e.max)?e.max.length-1:Number(e.max)}),o=m(()=>{if(!c.value)switch(!0){case s.value.modelValue<0:return 0;case s.value.modelValue>(b.value??100):return 100;default:return Math.round(s.value.modelValue/(b.value??100)*100)}}),$=m(()=>{if(o.value!==void 0)return e.orientation==="vertical"?{transform:`translateY(${e.inverted?"":"-"}${100-o.value}%)`}:l.value==="rtl"?{transform:`translateX(${e.inverted?"-":""}${100-o.value}%)`}:{transform:`translateX(${e.inverted?"":"-"}${100-o.value}%)`}}),R=m(()=>({[e.orientation==="vertical"?"height":"width"]:o.value?`${o.value}%`:"fit-content"}));function x(r){return r===Number(e.modelValue)}function n(r){return r===0}function w(r){return r===b.value}function k(r){return r=Number(r),x(r)&&!n(r)?"active":n(r)&&x(r)?"first":w(r)&&x(r)?"last":"other"}const _=m(()=>{var r;return O({extend:O(Pe),...((r=h.ui)==null?void 0:r.progress)||{}})({animation:e.animation,size:e.size,color:e.color,orientation:e.orientation,inverted:e.inverted})});return(r,j)=>{var C;return v(),M(t(L),{as:a.as,class:V(_.value.root({class:[(C=e.ui)==null?void 0:C.root,e.class]}))},{default:f(()=>{var A,d,E;return[!c.value&&(a.status||i.status)?(v(),z("div",{key:0,class:V(_.value.status({class:(A=e.ui)==null?void 0:A.status})),style:Y(R.value)},[F(r.$slots,"status",{percent:o.value},()=>[U(P(o.value)+"% ",1)])],6)):W("",!0),p(t(qe),J(t(s),{max:b.value,class:_.value.base({class:(d=e.ui)==null?void 0:d.base}),style:{transform:"translateZ(0)"}}),{default:f(()=>{var q;return[p(t(Ne),{class:V(_.value.indicator({class:(q=e.ui)==null?void 0:q.indicator})),style:Y($.value)},null,8,["class","style"])]}),_:1},16,["max","class"]),y.value?(v(),z("div",{key:1,class:V(_.value.steps({class:(E=e.ui)==null?void 0:E.steps}))},[(v(!0),z(ee,null,te(a.max,(q,T)=>{var D;return v(),z("div",{key:T,class:V(_.value.step({class:(D=e.ui)==null?void 0:D.step,step:k(T)}))},[F(r.$slots,`step-${T}`,{step:q},()=>[U(P(q),1)])],2)}),128))],2)):W("",!0)]}),_:3},8,["as","class"])}}},ke={id:"password-strength",class:"text-sm font-medium flex justify-end"},Ce={class:"space-y-1","aria-label":"Password requirements"},Ae={class:"text-sm font-light"},Ee={class:"sr-only"},He=I({__name:"login",setup(a){const u=he(),{toastError:e,toastSuccess:g}=ye(),i=Z(!1);function l(x){return[{regex:/.{8,}/,text:"على الأقل 8 حروف"},{regex:/\d/,text:"على الأقل 1 رقم"},{regex:/[a-z]/,text:"على الأقل 1 حرف صغير"},{regex:/[A-Z]/,text:"على الأقل 1 حرف كبير"}].map(w=>({met:w.regex.test(x),text:w.text}))}const h=m(()=>l(o.password)),s=m(()=>h.value.filter(x=>x.met).length),c=m(()=>s.value===0?"neutral":s.value<=1?"error":s.value<=2||s.value===3?"warning":"success"),y=m(()=>s.value===0?"أدخل كلمة السر":s.value<=2?"كلمة سر ضعيفة":s.value===3?"كلمة سر متوسطة":"كلمة سر قوية"),b=xe({email:K().email("الإيميل غير صالح").required("الإيميل مطلوب"),password:K().min(8,"يجب أن تكون 8 أحرف على الأقل").required("كلمة السر مطلوبة")}),o=me({email:"",password:""}),$=Z(!1);pe(async()=>{await u.auth.getSession(),G("/")});async function R(x){$.value=!0;try{const{error:n}=await u.auth.signInWithPassword({email:o.email||"",password:o.password||""});if(n)throw new Error(n.message);await we.post("/notifications/send-telegram",{message:`🔔 تم تسجيل الدخول بحساب ${o.email}`}),g({title:"تم تسجيل الدخول بنجاح"}),G({name:"auth-callback"})}catch(n){e({title:"فشل تسجيل الدخول",description:n instanceof Error?n.message:String(n)})}finally{$.value=!1}}return(x,n)=>{const w=se,k=re,_=fe,r=Se,j=ve,C=_e,A=ge;return v(),M(A,{class:"max-w-3xl mx-auto hover:shadow-2xl transition-all p-10"},{default:f(()=>[p(C,{schema:t(b),state:t(o),class:"space-y-2",onSubmit:R},{default:f(()=>[n[4]||(n[4]=N("h1",{class:"flex justify-center mb-10 font-bold text-3xl"}," تسجيل الدخول لموقع المدرسة ",-1)),p(k,{label:"الإيميل",name:"email",required:""},{default:f(()=>[p(w,{modelValue:t(o).email,"onUpdate:modelValue":n[0]||(n[0]=d=>t(o).email=d),class:"w-full"},null,8,["modelValue"])]),_:1}),p(k,{label:"كلمة السر",name:"password",required:""},{default:f(()=>[p(w,{modelValue:t(o).password,"onUpdate:modelValue":n[2]||(n[2]=d=>t(o).password=d),type:t(i)?"text":"password",class:"w-full"},{trailing:f(()=>[p(_,{color:"neutral",variant:"link",size:"sm",icon:t(i)?"i-lucide-eye-off":"i-lucide-eye","aria-label":t(i)?"Hide password":"Show password","aria-pressed":t(i),"aria-controls":"password",onClick:n[1]||(n[1]=d=>i.value=!t(i))},null,8,["icon","aria-label","aria-pressed"])]),_:1},8,["modelValue","type"])]),_:1}),p(r,{color:t(c),indicator:t(y),"model-value":t(s),max:4,size:"sm"},null,8,["color","indicator","model-value"]),N("p",ke,P(t(y)),1),N("ul",Ce,[(v(!0),z(ee,null,te(t(h),(d,E)=>(v(),z("li",{key:E,class:V(["flex items-center gap-0.5 justify-end",d.met?"text-success":"text-muted"])},[p(j,{name:d.met?"i-lucide-circle-check":"i-lucide-circle-x",class:"size-4 shrink-0"},null,8,["name"]),N("span",Ae,[U(P(d.text)+" ",1),N("span",Ee,P(d.met?" - Requirement met":" - Requirement not met"),1)])],2))),128))]),p(_,{type:"submit",class:"w-full flex justify-center hover:cursor-pointer",color:"secondary",loading:t($)},{default:f(()=>n[3]||(n[3]=[U(" تسجيل الدخول ")])),_:1,__:[3]},8,["loading"])]),_:1,__:[4]},8,["schema","state"])]),_:1})}}});export{He as default};
